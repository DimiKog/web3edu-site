import{r as o,j as e}from"./vendor-react-XZtyZRd7.js";import{P as p}from"./index-BPehdvbu.js";import{L as u}from"./LabCompletionClaim-ZUlSGNSS.js";import{u as f,a as v,v as c}from"./vendor-web3-Dys35WFk.js";const j={message:{text:"",provided:!1},signing:{method:null,signature:null,signed:!1},verification:{recoveredAddress:null,verified:!1,incomingVerified:!1},ownership:{proven:!1},explanationUnlocked:!1},t={senderName:"Dimitris Kogias",role:"Web3Edu Founder",sbtImage:"https://bronze-secondary-catfish-124.mypinata.cloud/ipfs/bafybeihnyrl6wrvqmt5moatkztryx32pux7l2f2lkcopoz53frije6ztui",address:"0x0E66db7d115B8F392eB7DFb8BaCb23675dAEB59E",message:`üëã Hello from Web3Edu!

You have just verified a real cryptographic signature.

This message proves ownership, not identity.

Now verify who sent it.`,signedMessage:`üëã Hello from Web3Edu!

You have just verified a real cryptographic signature.

This message proves ownership, not identity.

Now verify who sent it.`,signature:"0x003b342acf2581a2c301380f1e3910d4f930f37abb7140d8c3e9429daa5e5e5e6dad49b6fa07035d36ddf1c8f55bd20d5dd0e27e3cdd302e04db15e87f7d6f3d1c",hasValidSignature:!0},S=()=>{const[s,n]=o.useState(j),{address:l,isConnected:d}=f(),{signMessageAsync:g}=v();o.useEffect(()=>{s.signing.signed&&s.verification.verified&&n(r=>r.ownership.proven?r:{...r,ownership:{proven:!0},explanationUnlocked:!0})},[s.signing.signed,s.verification.verified]);const m=a=>{const r=a.target.value;n(i=>({...i,message:{text:r,provided:r.trim().length>0}}))},x=async a=>{{if(!d||!l)return;try{const r=await g({message:s.message.text});n(i=>({...i,signing:{method:"wallet",signature:r,signed:!0}}))}catch(r){console.error("Wallet signing failed",r)}}},h=()=>{try{const a=c(s.message.text,s.signing.signature),r=a&&l&&a.toLowerCase()===l.toLowerCase();n(i=>({...i,verification:{...i.verification,recoveredAddress:a,verified:r}}))}catch(a){console.error("Signature verification failed",a),n(r=>({...r,verification:{...r.verification,recoveredAddress:null,verified:!1}}))}},b=()=>{try{const r=c(t.signedMessage,t.signature).toLowerCase()===t.address.toLowerCase();n(i=>({...i,verification:{...i.verification,incomingVerified:r},ownership:r?{proven:!0}:i.ownership}))}catch(a){console.error("Incoming message verification failed",a)}};return e.jsx(p,{children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-12 space-y-10",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-3xl font-extrabold mb-2",children:"Lab 03 ‚Äî Message Signing & Ownership"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 max-w-3xl",children:"Prove ownership and intent using cryptographic signatures ‚Äî without revealing private keys or sending transactions."})]}),e.jsxs("section",{className:`rounded-xl border border-slate-200 dark:border-slate-700
                                    p-5 bg-slate-50 dark:bg-slate-900/40`,children:[e.jsx("h2",{className:"font-semibold mb-2",children:"üéØ Goal"}),e.jsx("p",{children:"Sign a message and verify the signature to prove ownership of a Web3 identity."})]}),e.jsxs("section",{className:`rounded-xl border border-slate-200 dark:border-slate-700
                                    p-5 bg-slate-50 dark:bg-slate-900/40`,children:[e.jsx("h2",{className:"font-semibold mb-4",children:"üß≠ Current State"}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[e.jsxs("li",{children:["Message provided: ",s.message.provided?"‚úÖ":"‚ùå"]}),e.jsxs("li",{children:["Message signed: ",s.signing.signed?"‚úÖ":"‚ùå"]}),e.jsxs("li",{children:["Signature verified: ",s.verification.verified?"‚úÖ":"‚ùå"]}),e.jsxs("li",{children:["Ownership proven: ",s.ownership.proven?"‚úÖ":"‚ùå"]}),e.jsxs("li",{children:["Blockchain interaction:"," ",e.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:"NOT NEEDED"})]})]})]}),e.jsxs("section",{className:`rounded-xl border border-slate-200 dark:border-slate-700
                                    p-5 bg-slate-50 dark:bg-slate-900/40 space-y-6`,children:[e.jsx("h2",{className:"font-semibold",children:"üéõ Available Actions"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"1Ô∏è‚É£ Provide a message"}),e.jsx("textarea",{value:s.message.text,onChange:m,rows:3,className:`w-full max-w-md rounded-md border px-3 py-2 text-sm
                                       text-slate-900 dark:text-slate-100
                                       bg-white dark:bg-slate-800
                                       placeholder-slate-400
                                       focus:outline-none focus:ring-2 focus:ring-indigo-500`,placeholder:"Type any message you want to sign‚Ä¶"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"2Ô∏è‚É£ Sign the message"}),e.jsx("div",{className:"flex gap-3",children:e.jsx("button",{disabled:!s.message.provided||!d,onClick:()=>x(),className:`px-4 py-2 rounded-md font-semibold text-white ${s.message.provided&&d?"bg-indigo-600 hover:bg-indigo-700":"bg-indigo-300 cursor-not-allowed"}`,children:"Sign with Wallet"})}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:["The generated signature will appear in the ",e.jsx("strong",{children:"Discovered Data"})," section below."]}),s.signing.signed&&e.jsxs("div",{className:`mt-3 rounded-lg border border-amber-300 dark:border-amber-600
                                          bg-amber-50 dark:bg-amber-900/30 p-3 text-sm`,children:[e.jsx("p",{className:"font-semibold text-amber-800 dark:text-amber-300 flex items-center gap-2",children:"‚ö†Ô∏è Why private keys are never exposed"}),e.jsxs("p",{className:"mt-1 text-amber-800/90 dark:text-amber-200/90",children:["A private key is the ultimate proof of ownership of a Web3 account. If it is ever revealed, copied, or shared, ",e.jsx("strong",{children:"control of the account is permanently lost"}),".",e.jsx("br",{}),e.jsx("br",{}),"Modern wallets perform signing ",e.jsx("em",{children:"internally"}),", so the private key never leaves the wallet ‚Äî even the application itself never sees it."]})]}),!d&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Connect your wallet to sign using Web3 identity."}),s.signing.signed&&e.jsxs("p",{className:"text-green-600 dark:text-green-400 text-sm mt-2 flex items-center gap-1",children:[e.jsx("span",{"aria-hidden":"true",children:"‚úì"})," Message signed"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"3Ô∏è‚É£ Verify the signature"}),e.jsxs("p",{className:"text-sm md:text-base text-slate-700 dark:text-slate-300 mt-1 max-w-md",children:["Verification means ",e.jsx("strong",{children:"cryptographically proving"})," that this signature was produced by the private key controlling the recovered address ‚Äî",e.jsx("span",{className:"font-semibold",children:" without trusting this application or the blockchain"}),"."]}),s.verification.verified&&e.jsxs("p",{className:"mt-2 text-sm md:text-base font-mono tracking-wide",children:[e.jsx("span",{className:"text-indigo-600 dark:text-indigo-400",children:"Message"}),e.jsx("span",{className:"mx-2 text-slate-400",children:"‚Üí"}),e.jsx("span",{className:"text-fuchsia-600 dark:text-fuchsia-400",children:"Signature"}),e.jsx("span",{className:"mx-2 text-slate-400",children:"‚Üí"}),e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:"Address"})]}),s.verification.verified?e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-sm space-y-1",children:[e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{"aria-hidden":"true",children:"‚úì"})," Signature verified"]}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-300 text-xs",children:["You can now see in ",e.jsx("strong",{children:"Discovered Data"})," that the recovered address matches the wallet address you used to sign the message."]})]}):e.jsx("button",{disabled:!s.signing.signed,onClick:h,className:`px-4 py-2 rounded-md font-semibold text-white ${s.signing.signed?"bg-indigo-600 hover:bg-indigo-700":"bg-indigo-300 cursor-not-allowed"}`,children:"Verify Signature"})]})]}),e.jsxs("section",{className:`rounded-xl border border-slate-200 dark:border-slate-700
                                    p-5 bg-slate-50 dark:bg-slate-900/40`,children:[e.jsx("h2",{className:"font-semibold mb-4",children:"üîç Discovered Data"}),e.jsxs("ul",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[s.signing.signed&&e.jsxs("li",{children:[e.jsx("strong",{children:"Signature:"}),e.jsx("div",{className:`mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-800
                                                font-mono text-xs break-all`,children:s.signing.signature})]}),s.verification.verified&&e.jsxs("li",{children:[e.jsx("strong",{children:"Recovered address:"}),e.jsx("div",{className:`relative mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-800
                                               font-mono text-xs break-all
                                               ring-2 ring-emerald-400/60
                                               animate-pulse`,title:"This address was mathematically recovered from your signature.",children:s.verification.recoveredAddress}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"This address was mathematically recovered from your signature."})]})]})]}),s.verification.verified&&e.jsxs("section",{className:`rounded-xl border border-slate-200 dark:border-slate-700
                                        p-5 bg-slate-50 dark:bg-slate-900/40 space-y-4`,children:[e.jsx("h2",{className:"font-semibold text-lg",children:"üì© Incoming Signed Message"}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Someone sent you a signed message. Before trusting it, you must verify who actually signed it."}),e.jsxs("div",{className:`rounded-md border border-slate-300 dark:border-slate-600
                                        bg-white dark:bg-slate-800 p-4 space-y-3`,children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Message:"}),e.jsx("pre",{className:"mt-1 text-sm whitespace-pre-wrap",children:t.message})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Claimed sender address:"}),e.jsx("div",{className:"mt-1 font-mono text-xs break-all",children:t.address})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Signature:"}),e.jsx("div",{className:"mt-1 font-mono text-xs break-all",children:t.signature})]})]}),s.verification.incomingVerified?e.jsxs("p",{className:"text-green-600 dark:text-green-400 text-sm flex items-center gap-1 mt-2",children:[e.jsx("span",{"aria-hidden":"true",children:"‚úì"})," Sender successfully verified"]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:b,disabled:!1,className:"px-4 py-2 rounded-md font-semibold text-white bg-indigo-600 hover:bg-indigo-700",children:"Verify Sender"}),!1]}),s.verification.incomingVerified&&e.jsxs("div",{className:`mt-4 rounded-xl border border-green-300 dark:border-green-700
                                            bg-green-50 dark:bg-green-900/30 p-4`,children:[e.jsx("h3",{className:"font-semibold mb-2",children:"ü™™ Verified Web3 Identity"}),e.jsx("p",{className:"text-sm mb-3",children:"This message was signed by a verified Web3Edu founder identity."}),e.jsxs("div",{className:`mt-3 rounded-lg border border-indigo-300 dark:border-indigo-700
                                                bg-indigo-50 dark:bg-indigo-900/40 p-4`,children:[e.jsx("div",{className:"mb-3 flex justify-center",children:e.jsx("img",{src:t.sbtImage,alt:"Sender SBT",className:`w-24 h-24 rounded-full border border-indigo-400 dark:border-indigo-600
                                                           shadow-md bg-white dark:bg-slate-800`,loading:"lazy"})}),e.jsx("p",{className:"text-sm font-semibold",children:"üéì Web3Edu Founder SBT"}),e.jsxs("ul",{className:"mt-2 text-sm space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Name:"})," Dimitris Kogias"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Role:"})," Founder ¬∑ Educator"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Credential:"})," Web3Edu Founder"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Type:"})," Soulbound Token (non-transferable)"]})]})]}),e.jsxs("div",{className:`rounded-lg border border-slate-300 dark:border-slate-600
                                                bg-white dark:bg-slate-800 p-4 mt-3`,children:[e.jsx("p",{className:"font-semibold",children:t.senderName}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:t.role}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Identity anchored via Soulbound Token (SBT)"})]}),e.jsx("p",{className:"mt-3 text-sm italic text-slate-600 dark:text-slate-400",children:"Signature ‚Üí Address ‚Üí Identity"}),e.jsxs("div",{className:"mt-3 text-green-600 dark:text-green-400 text-sm flex items-center gap-1",children:[e.jsx("span",{"aria-hidden":"true",children:"‚úì"})," Sender verified"]})]})]}),s.explanationUnlocked&&e.jsxs("section",{className:`rounded-xl border border-indigo-200 dark:border-indigo-700
                                        p-5 bg-indigo-50 dark:bg-indigo-900/30`,children:[e.jsx("h2",{className:"font-semibold mb-3",children:"üß† Explanation"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-sm",children:[e.jsx("li",{children:"Signing proves ownership and intent."}),e.jsx("li",{children:"The private key is never revealed."}),e.jsx("li",{children:"Anyone can verify a signature."}),e.jsx("li",{children:"No transaction or blockchain interaction is required."}),e.jsx("li",{children:"This mechanism underpins Web3 authentication and DAO voting."})]})]}),s.explanationUnlocked&&e.jsxs("section",{className:`rounded-xl border border-slate-200 dark:border-slate-700
                                        p-5 bg-slate-50 dark:bg-slate-900/40`,children:[e.jsx("h2",{className:"font-semibold mb-2",children:"üèÅ Challenge"}),e.jsx("p",{className:"text-sm",children:"Can you prove to a friend that you own a Web3 address without sending them ETH or revealing your private key?"})]}),s.ownership.proven===!0&&s.verification.incomingVerified===!0&&e.jsxs("section",{className:`rounded-xl border border-green-300 dark:border-green-700
                                        bg-green-50 dark:bg-green-900/30 p-6 mt-6 flex flex-col items-center text-center`,children:[e.jsx("h2",{className:"text-2xl font-bold mb-2 text-green-600 dark:text-green-400",children:"üéâ Lab Completed"}),e.jsx("p",{className:"text-green-700 dark:text-green-300 font-semibold mb-2",children:"You have completed Lab 03 ‚Äî Message Signing & Ownership."}),e.jsx("p",{className:"mb-4 text-slate-800 dark:text-slate-200 text-sm max-w-lg",children:"You have successfully verified your ownership of a Web3 address and trusted a signed message from another party ‚Äî all without any blockchain transaction or revealing your private key. This is the foundation of Web3 authentication!"}),e.jsx(u,{labId:"lab03",language:"en",backHref:"/#/labs/lab03",backLabel:"‚¨Ö Return to Lab Overview"})]})]})})};export{S as default};
