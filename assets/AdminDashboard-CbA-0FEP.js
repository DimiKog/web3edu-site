import{j as e,r as i}from"./vendor-react-DaA--_H6.js";import{f as p,a as f}from"./adminApi-CSNMpv-F.js";import{u as g}from"./vendor-web3-B5M9rCAm.js";function v({overview:t,platform:s}){return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(u,{label:"Total Users",value:t?.totalUsers}),e.jsx(u,{label:"Started Any Lab",value:s?.usersStartedAnyLab??0}),e.jsx(u,{label:"Completed Any Lab",value:s?.usersCompletedAnyLab??0}),e.jsx(u,{label:"3+ Labs (Retention)",value:t?.usersWith3PlusLabs})]})}function u({label:t,value:s}){return e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/70 dark:bg-[#0b0f17]/80 backdrop-blur-xl p-4 shadow-md",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:t}),e.jsx("div",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100 mt-1",children:s})]})}function j({platform:t}){if(!t)return null;const s=t.usersStartedAnyLab>0?Math.round(t.usersCompletedAnyLab/t.usersStartedAnyLab*100):0;return e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/70 dark:bg-[#0b0f17]/80 backdrop-blur-xl shadow-[0_24px_70px_rgba(15,23,42,0.18)] p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6 text-slate-900 dark:text-slate-100",children:"Platform Analytics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsx(h,{label:"Started Any Lab",value:t.usersStartedAnyLab}),e.jsx(h,{label:"Completed Any Lab",value:t.usersCompletedAnyLab}),e.jsx(h,{label:"Completion (Started → Completed)",value:`${s}%`})]})]})}function h({label:t,value:s}){return e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/70 dark:bg-[#0b0f17]/80 backdrop-blur-xl p-4 shadow-md",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:t}),e.jsx("div",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100 mt-1",children:s})]})}function w({labs:t}){if(!t||t.length===0)return null;const s=[...t].sort((a,c)=>c.completionRate-a.completionRate),m=[...t].sort((a,c)=>c.dropOff-a.dropOff),l=[...t].sort((a,c)=>c.started-a.started),x=s[0],r=s[s.length-1],d=m[0],n=l[0],o=l[l.length-1];return e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/70 dark:bg-[#0b0f17]/80 backdrop-blur-xl shadow-[0_24px_70px_rgba(15,23,42,0.18)] p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6 text-slate-900 dark:text-slate-100",children:"Learning Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsx(b,{label:"Best Performing Lab",value:`${x?.title?.en||x?.labId} (${Math.round(x?.completionRate*100)}%)`}),e.jsx(b,{label:"Lowest Completion",value:`${r?.title?.en||r?.labId} (${Math.round(r?.completionRate*100)}%)`}),e.jsx(b,{label:"Highest Drop-off",value:`${d?.title?.en||d?.labId} (${d?.dropOff})`}),e.jsx(b,{label:"Most Engaged Lab",value:`${n?.title?.en||n?.labId} (${n?.started} starts)`}),e.jsx(b,{label:"Lowest Engagement",value:`${o?.title?.en||o?.labId} (${o?.started} starts)`})]})]})}function b({label:t,value:s}){return e.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/60 dark:bg-[#111827]/60 p-4",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:t}),e.jsx("div",{className:"mt-1 font-medium text-slate-900 dark:text-slate-100",children:s})]})}function L(){const{address:t}=g(),[s,m]=i.useState(null),[l,x]=i.useState(null),[r,d]=i.useState(null),[n,o]=i.useState(null);return i.useEffect(()=>{t&&p(t).then(m).catch(()=>x("Not authorized"))},[t]),i.useEffect(()=>{t&&f(t).then(a=>{a?.platform&&o(a.platform),d(a?.labs||[])}).catch(()=>{d([]),o(null)})},[t]),l?e.jsx("div",{className:"max-w-4xl rounded-2xl border border-red-500/30 bg-red-500/10 text-red-200 px-6 py-4",children:l}):s?e.jsxs("div",{className:"relative min-h-[calc(100vh-8rem)]",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute -top-32 left-1/2 h-[420px] w-[420px] -translate-x-1/2 rounded-full bg-[#8A57FF]/25 blur-[140px]"}),e.jsx("div",{className:"absolute top-1/3 -right-24 h-[360px] w-[360px] rounded-full bg-[#4ACBFF]/20 blur-[140px]"}),e.jsx("div",{className:"absolute bottom-[-10%] left-[-8%] h-[320px] w-[320px] rounded-full bg-[#FF67D2]/15 blur-[130px]"})]}),e.jsxs("div",{className:"relative z-10 space-y-12",children:[e.jsx("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold tracking-tight bg-gradient-to-r from-[#FF67D2] via-[#8A57FF] to-[#4ACBFF] text-transparent bg-clip-text",children:"Admin Dashboard"}),e.jsx("p",{className:"text-base text-slate-600 dark:text-slate-300 mt-2",children:"Overview & management tools for Web3Edu"})]})}),e.jsx(v,{overview:s,platform:n}),r&&r.length>0&&e.jsx(w,{labs:r}),e.jsx(j,{platform:n})]})]}):e.jsx("div",{className:"max-w-4xl rounded-2xl border border-white/10 bg-white/70 dark:bg-[#0b0f17]/80 backdrop-blur-xl px-6 py-4 text-slate-700 dark:text-slate-200",children:"Loading admin data…"})}export{L as default};
