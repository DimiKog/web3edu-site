import{d as u,r as c,j as e}from"./vendor-react-B7ncG0z2.js";import{P as j}from"./index-B7sPhVuX.js";import{u as f}from"./vendor-web3-Bvyti59t.js";const b="https://web3edu-api.dimikog.org";function A(){const{labId:l}=u(),{address:r}=f(),[t,x]=c.useState(null),[h,n]=c.useState(!0),[i,m]=c.useState(null),p=t?.entries?[...t.entries].sort((s,a)=>{const o=s.completedAtEpoch||s.startedAtEpoch||0;return(a.completedAtEpoch||a.startedAtEpoch||0)-o}):[];return c.useEffect(()=>{async function s(){try{if(!r){m("Admin wallet not connected."),n(!1);return}const a=await fetch(`${b}/admin/labs/details?wallet=${r}&labId=${l}`);if(!a.ok)throw new Error("Failed to fetch lab details");const o=await a.json();x(o)}catch(a){console.error(a),m("Could not load lab details.")}finally{n(!1)}}s()},[l,r]),e.jsx(j,{children:e.jsx("div",{className:"min-h-screen px-6 py-20",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Lab Details: ",l]}),h&&e.jsx("div",{className:"text-slate-400",children:"Loading lab analytics..."}),i&&e.jsx("div",{className:"text-red-400",children:i}),t?.summary&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid md:grid-cols-5 gap-6",children:[e.jsx(d,{label:"Total Users",value:t.summary.totalUsers}),e.jsx(d,{label:"Started",value:t.summary.started}),e.jsx(d,{label:"Completed",value:t.summary.completed}),e.jsx(d,{label:"Drop-off",value:t.summary.dropOff}),e.jsx(d,{label:"Completion %",value:t.summary.started>0?Math.round(t.summary.completed/t.summary.started*100)+"%":"0%"})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"User Breakdown"}),e.jsx("div",{className:"overflow-x-auto border border-slate-800 rounded-xl",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-900/60",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Wallet"}),e.jsx("th",{className:"p-3 text-left",children:"Started"}),e.jsx("th",{className:"p-3 text-left",children:"Completed"}),e.jsx("th",{className:"p-3 text-left",children:"Started At"}),e.jsx("th",{className:"p-3 text-left",children:"Completed At"}),e.jsx("th",{className:"p-3 text-left",children:"XP"})]})}),e.jsx("tbody",{children:p.map(s=>e.jsxs("tr",{className:"border-t border-slate-800 hover:bg-slate-800/40",children:[e.jsx("td",{className:"p-3 font-mono text-xs",children:s.wallet}),e.jsx("td",{className:"p-3",children:s.started?"✔":"✖"}),e.jsx("td",{className:"p-3",children:s.completed?"✔":"✖"}),e.jsx("td",{className:"p-3",children:s.startedAt||"-"}),e.jsx("td",{className:"p-3",children:s.completedAt||"-"}),e.jsx("td",{className:"p-3",children:s.xp})]},s.wallet))})]})})]})]})]})})})}function d({label:l,value:r}){return e.jsxs("div",{className:"bg-slate-900/40 border border-slate-800 rounded-xl p-6",children:[e.jsx("div",{className:"text-sm text-slate-400",children:l}),e.jsx("div",{className:"text-2xl font-semibold mt-1",children:r})]})}export{A as default};
