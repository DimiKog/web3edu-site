import{j as e,u as h}from"./vendor-web3-CU4tlwXS.js";import{r as d}from"./vendor-react-BB8kI09H.js";import{P as x}from"./index-D7FA3d3P.js";const b="https://web3edu-api.dimikog.org";async function u(t){const a=await fetch(`${b}/admin/overview?wallet=${t.toLowerCase()}`);if(!a.ok)throw new Error("Not authorized");return a.json()}async function p(t){const a=await fetch(`${b}/admin/labs/summary?wallet=${t.toLowerCase()}`);if(!a.ok)throw new Error("Not authorized");return(await a.json()).labs||[]}function g(t){return t>=.8?"text-green-600 dark:text-green-400":t>=.4?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}function c(t){return Math.max(0,(t.started||0)-(t.completed||0))}function f(t){return t>=5?"bg-red-50/70 dark:bg-red-900/20":t>=2?"bg-yellow-50/70 dark:bg-yellow-900/20":""}function j({labs:t}){if(!t||t.length===0)return e.jsx("div",{className:"mt-8 text-slate-500 dark:text-slate-300",children:"No lab data available yet."});const a=t.slice().sort((r,l)=>c(l)-c(r)).reduce((r,l)=>{const s=l.category||"other";return r[s]||(r[s]=[]),r[s].push(l),r},{});return e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Labs Progress"}),e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-white/10 bg-white/60 dark:bg-[#0b0f17]/70 backdrop-blur-xl",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-white/80 dark:bg-[#111827]/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left text-slate-700 dark:text-slate-200",children:"Lab"}),e.jsx("th",{className:"p-3 text-left text-slate-700 dark:text-slate-200",children:"Category"}),e.jsx("th",{className:"p-3 text-center text-slate-700 dark:text-slate-200",children:"Started"}),e.jsx("th",{className:"p-3 text-center text-slate-700 dark:text-slate-200",children:"Completed"}),e.jsx("th",{className:"p-3 text-center text-slate-700 dark:text-slate-200",children:"Drop‑off"}),e.jsx("th",{className:"p-3 text-center text-slate-700 dark:text-slate-200",children:"Completion"})]})}),e.jsx("tbody",{children:Object.entries(a).map(([r,l])=>e.jsxs(d.Fragment,{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-3 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-slate-600 dark:text-slate-300 bg-slate-100/70 dark:bg-slate-900/60",children:r})},r),l.map(s=>{const i=c(s);return e.jsxs("tr",{className:`border-t border-white/10 hover:bg-white/60 dark:hover:bg-white/5 ${f(i)}`,children:[e.jsx("td",{className:"p-3 text-slate-900 dark:text-slate-100",children:s.title?.en||s.labId}),e.jsx("td",{className:"p-3 text-sm text-slate-600 dark:text-slate-400",children:s.category}),e.jsx("td",{className:"p-3 text-center text-slate-700 dark:text-slate-200",children:s.started}),e.jsx("td",{className:"p-3 text-center text-slate-700 dark:text-slate-200",children:s.completed}),e.jsx("td",{className:"p-3 text-center text-sm font-medium text-slate-700 dark:text-slate-300",children:i}),e.jsxs("td",{className:`p-3 text-center font-semibold ${g(s.completionRate||0)}`,children:[Math.round((s.completionRate||0)*100),"%"]})]},s.labId)})]},r))})]})})]})}function y(){const{address:t}=h(),[a,r]=d.useState(null),[l,s]=d.useState(null),[i,o]=d.useState(null);return d.useEffect(()=>{t&&u(t).then(r).catch(()=>s("Not authorized"))},[t]),d.useEffect(()=>{t&&p(t).then(o).catch(()=>o([]))},[t]),l?e.jsx(x,{children:e.jsx("div",{className:"min-h-screen px-6 py-20",children:e.jsx("div",{className:"max-w-4xl mx-auto rounded-2xl border border-red-500/30 bg-red-500/10 text-red-200 px-6 py-4",children:l})})}):a?e.jsx(x,{children:e.jsxs("div",{className:"relative min-h-screen px-6 py-20",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute -top-32 left-1/2 h-[420px] w-[420px] -translate-x-1/2 rounded-full bg-[#8A57FF]/25 blur-[140px]"}),e.jsx("div",{className:"absolute top-1/3 -right-24 h-[360px] w-[360px] rounded-full bg-[#4ACBFF]/20 blur-[140px]"}),e.jsx("div",{className:"absolute bottom-[-10%] left-[-8%] h-[320px] w-[320px] rounded-full bg-[#FF67D2]/15 blur-[130px]"})]}),e.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto space-y-12",children:[e.jsx("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500 dark:text-slate-400",children:"Admin"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold tracking-tight bg-gradient-to-r from-[#FF67D2] via-[#8A57FF] to-[#4ACBFF] text-transparent bg-clip-text",children:"Admin Dashboard"}),e.jsx("p",{className:"text-base text-slate-600 dark:text-slate-300 mt-2",children:"Overview & management tools for Web3Edu"})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(n,{label:"Total Users",value:a.totalUsers}),e.jsx(n,{label:"Labs Started",value:a.usersWithLabsStarted}),e.jsx(n,{label:"1 Lab",value:a.usersWith1Lab}),e.jsx(n,{label:"2 Labs",value:a.usersWith2Labs}),e.jsx(n,{label:"3+ Labs",value:a.usersWith3PlusLabs})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(m,{title:"Labs Analytics",description:"Completion statistics and per-lab insights",actionLabel:"View Labs",onClick:()=>window.location.hash="#/admin/labs"}),e.jsx(m,{title:"User Progress",description:"Aggregated learner progress across Web3Edu",actionLabel:"Coming soon",disabled:!0}),e.jsx(m,{title:"Identity & SBTs",description:"Inspect identity layer and skill attestations",actionLabel:"Coming soon",disabled:!0})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/70 dark:bg-[#0b0f17]/80 backdrop-blur-xl shadow-[0_24px_70px_rgba(15,23,42,0.18)] p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Labs Summary"}),e.jsxs("div",{className:"mb-4 rounded-xl border border-yellow-400/50 bg-yellow-50/80 p-4 text-yellow-900 dark:border-yellow-600/40 dark:bg-yellow-950/30 dark:text-yellow-200",role:"alert",children:[e.jsx("strong",{className:"font-semibold",children:"Notice:"})," Lab completion is currently inferred from lab start, and analytics are provisional."]}),e.jsx(j,{labs:i})]})]})]})}):e.jsx(x,{children:e.jsx("div",{className:"min-h-screen px-6 py-20",children:e.jsx("div",{className:"max-w-4xl mx-auto rounded-2xl border border-white/10 bg-white/70 dark:bg-[#0b0f17]/80 backdrop-blur-xl px-6 py-4 text-slate-700 dark:text-slate-200",children:"Loading admin data…"})})})}function n({label:t,value:a}){return e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/70 dark:bg-[#0b0f17]/80 backdrop-blur-xl p-4 shadow-md",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:t}),e.jsx("div",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100 mt-1",children:a})]})}function m({title:t,description:a,actionLabel:r,onClick:l,disabled:s}){return e.jsxs("div",{className:"group relative rounded-2xl border border-white/10 bg-white/70 dark:bg-[#0b0f17]/80 backdrop-blur-xl p-6 shadow-lg",children:[e.jsx("div",{className:"absolute -inset-0.5 rounded-2xl bg-gradient-to-r from-[#8A57FF]/20 via-[#4ACBFF]/15 to-[#FF67D2]/15 opacity-0 group-hover:opacity-100 blur-sm transition-opacity duration-500"}),e.jsxs("div",{className:"relative space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:t}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:a}),e.jsx("button",{className:`inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-semibold transition ${s?"bg-slate-200 text-slate-500 dark:bg-slate-800 dark:text-slate-400 cursor-not-allowed":"bg-slate-900 text-white hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200"}`,onClick:s?void 0:l,disabled:s,children:r})]})]})}export{y as default};
