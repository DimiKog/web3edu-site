import{d as j,r as i,j as e}from"./vendor-react-XZtyZRd7.js";import{A as g}from"./AdminBackButton-BZVMxydf.js";import{u as k}from"./vendor-web3-Dys35WFk.js";const w="https://web3edu-api.dimikog.org";function y(){const{labId:l}=j(),{address:r}=k(),[a,c]=i.useState(null),[n,x]=i.useState(!0),[m,p]=i.useState(null),[b,h]=i.useState(null),f=a?.entries?[...a.entries].sort((t,s)=>{const d=t.completedAtEpoch||t.startedAtEpoch||0;return(s.completedAtEpoch||s.startedAtEpoch||0)-d}):[];return i.useEffect(()=>{async function t(){try{if(!r){p("Admin wallet not connected."),x(!1);return}const s=await fetch(`${w}/admin/labs/details?wallet=${r}&labId=${l}`);if(!s.ok)throw new Error("Failed to fetch lab details");const d=await s.json();c(d)}catch(s){console.error(s),p("Could not load lab details.")}finally{x(!1)}}t()},[l,r]),n?e.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/70 dark:bg-[#0b0f17]/80 backdrop-blur-xl px-6 py-4 text-slate-700 dark:text-slate-200",children:"Loading lab analytics…"}):m?e.jsx("div",{className:"rounded-2xl border border-red-500/30 bg-red-500/10 text-red-600 dark:text-red-200 px-6 py-4",children:m}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight bg-gradient-to-r from-[#FF67D2] via-[#8A57FF] to-[#4ACBFF] text-transparent bg-clip-text",children:"Lab Details"}),e.jsxs("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:["Lab ID: ",e.jsx("span",{className:"font-semibold font-mono",children:l})]})]}),e.jsx(g,{to:"/admin/labs",label:"Back to Labs"})]}),a?.summary&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(o,{label:"Total Users",value:a.summary.totalUsers}),e.jsx(o,{label:"Started",value:a.summary.started}),e.jsx(o,{label:"Completed",value:a.summary.completed}),e.jsx(o,{label:"Drop-off",value:a.summary.dropOff,variant:a.summary.dropOff>0?"warning":"default"}),e.jsx(o,{label:"Completion %",value:a.summary.started>0?Math.round(a.summary.completed/a.summary.started*100)+"%":"0%",variant:a.summary.started>0&&a.summary.completed/a.summary.started>=.7?"success":"default"})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"User Breakdown"}),e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-white/10 bg-white/70 dark:bg-[#0b0f17]/80 backdrop-blur-xl shadow-[0_24px_70px_rgba(15,23,42,0.18)]",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-white/80 dark:bg-[#111827]/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 font-semibold",children:"Wallet"}),e.jsx("th",{className:"p-3 text-left text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 font-semibold",children:"Started"}),e.jsx("th",{className:"p-3 text-left text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 font-semibold",children:"Completed"}),e.jsx("th",{className:"p-3 text-left text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 font-semibold",children:"Started At"}),e.jsx("th",{className:"p-3 text-left text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 font-semibold",children:"Completed At"}),e.jsx("th",{className:"p-3 text-left text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 font-semibold",children:"XP"})]})}),e.jsx("tbody",{children:f.map(t=>{const s=t.wallet?`${t.wallet.slice(0,6)}...${t.wallet.slice(-4)}`:"-",d=b===t.wallet;function u(){navigator.clipboard.writeText(t.wallet),h(t.wallet),setTimeout(()=>h(null),1500)}return e.jsxs("tr",{className:"border-t border-white/10 hover:bg-white/60 dark:hover:bg-white/5 transition",children:[e.jsx("td",{className:"p-3 font-mono text-xs text-slate-700 dark:text-slate-300",children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[s,e.jsx("button",{onClick:u,title:t.wallet,className:"text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 transition text-[10px]",children:d?"✓":"⎘"})]})}),e.jsx("td",{className:"p-3 font-semibold",children:t.started?e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:"✔"}):e.jsx("span",{className:"text-rose-600 dark:text-rose-400",children:"✖"})}),e.jsx("td",{className:"p-3 font-semibold",children:t.completed?e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:"✔"}):e.jsx("span",{className:"text-rose-600 dark:text-rose-400",children:"✖"})}),e.jsx("td",{className:"p-3 text-slate-600 dark:text-slate-400",children:t.startedAt||"-"}),e.jsx("td",{className:"p-3 text-slate-600 dark:text-slate-400",children:t.completedAt||"-"}),e.jsx("td",{className:"p-3 font-medium text-slate-900 dark:text-slate-100",children:t.xp})]},t.wallet)})})]})})]})]})]})}function o({label:l,value:r,variant:a="default"}){const c={default:"",success:"ring-2 ring-emerald-500/20",warning:"ring-2 ring-amber-500/20"},n={default:"text-slate-900 dark:text-slate-100",success:"text-emerald-600 dark:text-emerald-400",warning:"text-amber-600 dark:text-amber-400"};return e.jsxs("div",{className:`rounded-2xl border border-white/10 bg-white/70 dark:bg-[#0b0f17]/80 backdrop-blur-xl shadow-[0_24px_70px_rgba(15,23,42,0.18)] p-5 ${c[a]}`,children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 font-medium",children:l}),e.jsx("div",{className:`text-2xl font-bold mt-1 ${n[a]}`,children:r})]})}export{y as default};
