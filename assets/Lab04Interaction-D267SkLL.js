import{r as h,j as e}from"./react-vendor-C3nCzrQE.js";import{P as T}from"./index-grxjZXWT.js";/* empty css                   */import{B as b,f as g}from"./web3-vendor-DxqyInks.js";import"./ui-vendor-CsLUdq9X.js";const p={currentStep:1,lastAction:null,preStateObserved:!1,preState:{balance:null,nonce:null},wallet:{connected:!1,address:null,network:null,isCorrectNetwork:!1},txExplored:!1,txFields:{from:"",to:"",value:"",gasLimit:"",gasPrice:"",nonce:""},gasConceptUnderstood:!1,postStateObserved:!1,postState:{balance:null,nonce:null},txSent:!1,txHash:"",postTxChecked:!1,discoveredData:[],explanationUnlocked:!1},u="0x01c6e6afeb02082edb538dc24f2157090381d175bef6354bbf8c54c8b349fdfe",a={from:"0x7e81C3B018e6c471eeFf5dEE7483bc32bF8635C4",to:"0x0E66db7d115B8F392eB7DFb8BaCb23675dAEB59E",value:"1 ETH",gasPrice:"1 Gwei",gasLimit:"21,000",gasUsed:"21,000 (100%)",nonce:"99",block:"3121417",status:"Success"},E="https://blockexplorer.dimikog.org/tx/"+u,A=()=>{const[s,i]=h.useState(p);h.useEffect(()=>{window.scrollTo(0,0)},[]);const j=async()=>{if(!window.ethereum){alert("MetaMask not detected");return}try{const t=new b(window.ethereum),r=await t.send("eth_requestAccounts",[]),d=await(await t.getSigner()).getAddress(),n=await t.getNetwork(),l=Number(n.chainId),o=[424242],N=n.name&&n.name!=="unknown"?n.name:`Besu Edu-Net (Chain ID ${l})`,v=o.includes(l),w=await t.getBalance(d),y=await t.getTransactionCount(d);i(m=>({...m,preStateObserved:!0,wallet:{connected:!0,address:d,network:N,isCorrectNetwork:v},preState:{balance:`${g(w)} ETH`,nonce:y.toString()},lastAction:"Live pre-transaction state fetched from wallet",discoveredData:[...m.discoveredData,"Wallets expose live on-chain state (balance and nonce) without creating a transaction."]}))}catch(t){console.error("Wallet connection failed",t),alert("Failed to connect wallet or fetch state")}},k=async()=>{if(!window.ethereum){alert("MetaMask not detected");return}try{const t=new b(window.ethereum),c=await(await t.getSigner()).getAddress(),d=await t.getBalance(c),n=parseFloat(g(d)),l=parseFloat((s.preState.balance||"0").replace("ETH","").trim());if(n<=l){alert("Balance has not increased. Please complete the faucet transaction first.");return}i(o=>({...o,postTxChecked:!0,postStateObserved:!0,postState:{balance:`${n} ETH`,nonce:o.preState.nonce},lastAction:"Balance increase verified after faucet transaction",discoveredData:[...o.discoveredData,"Receiving funds increases balance but does not change nonce."]}))}catch(t){console.error("Post-tx check failed",t),alert("Failed to re-check balance and nonce")}},f=()=>{i({...p,lastAction:null})},x=s.preStateObserved||s.txExplored||s.gasConceptUnderstood||s.postStateObserved||s.discoveredData.length>0;return e.jsx(T,{children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-12 space-y-10",children:[e.jsxs("section",{className:"rounded-xl border border-white/80 dark:border-slate-700 p-5 bg-white/70 dark:bg-slate-900/40",children:[e.jsx("h1",{className:"text-3xl font-extrabold mb-2",children:"Lab 04 â€” Transactions & Gas"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 max-w-3xl",children:"Explore how blockchain transactions change on-chain state and why gas is required for execution."})]}),e.jsxs("section",{className:"rounded-xl border border-white/80 dark:border-slate-700 p-5 bg-slate-50 dark:bg-slate-900/40",children:[e.jsx("h2",{className:"font-semibold mb-2",children:"ğŸ§­ Current State"}),s.lastAction&&e.jsxs("div",{className:"mb-3 p-3 rounded-md bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 text-sm font-semibold animate-fadeIn",children:["âœ… ",s.lastAction]},s.lastAction),e.jsxs("ul",{className:"text-sm space-y-1 text-slate-700 dark:text-slate-300",children:[e.jsxs("li",{children:["Pre-transaction state observed:",s.preStateObserved?e.jsx("span",{className:"inline-block ml-1 text-green-600 animate-bounce",children:"âœ“"}):"âŒ"]}),e.jsxs("li",{children:["Transaction structure explored:",s.txExplored?e.jsx("span",{className:"inline-block ml-1 text-green-600 animate-bounce",children:"âœ“"}):"âŒ"]}),e.jsxs("li",{children:["Gas concept understood:",s.gasConceptUnderstood?e.jsx("span",{className:"inline-block ml-1 text-green-600 animate-bounce",children:"âœ“"}):"âŒ"]}),e.jsxs("li",{children:["Post-transaction state observed:",s.postStateObserved?e.jsx("span",{className:"inline-block ml-1 text-green-600 animate-bounce",children:"âœ“"}):"âŒ"]}),e.jsxs("li",{children:["Real blockchain interaction completed:",s.postTxChecked?e.jsx("span",{className:"inline-block ml-1 text-green-600 animate-bounce",children:"âœ“"}):"âŒ"]})]})]}),e.jsxs("section",{className:"rounded-xl border border-white/80 dark:border-slate-700 p-5 bg-white/70 dark:bg-slate-900/40",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"ğŸ› Available Actions"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-xl border border-white/80 dark:border-slate-700 p-5 bg-white/80 dark:bg-slate-900/50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"1ï¸âƒ£ Observe Pre-Transaction State (Before Anything Happens)"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:["Even before you send a transaction, your wallet already has ",e.jsx("strong",{children:"onâ€‘chain state"}),". This state exists independently of any action you take now."]}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-slate-600 dark:text-slate-400 mb-4 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Balance"}),": how much ETH the account owns"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Nonce"}),": how many transactions the account has already sent"]})]}),e.jsxs("div",{className:`p-3 rounded-md bg-yellow-100 dark:bg-yellow-900/40
                                text-yellow-800 dark:text-yellow-300 text-sm mb-4`,children:["ğŸ” At this stage, ",e.jsx("strong",{children:"no transaction exists yet"}),". You are only observing existing blockchain state."]}),e.jsx("button",{onClick:j,className:"px-4 py-2 rounded-md bg-indigo-600 hover:bg-indigo-700 text-white font-semibold",children:"ğŸ”Œ Connect Wallet & Observe State"}),s.preStateObserved&&e.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 dark:border-slate-700 p-4 bg-slate-50 dark:bg-slate-900/40",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"âœ… Observed Preâ€‘Transaction State"}),!s.wallet.isCorrectNetwork&&e.jsxs("div",{className:`mb-3 p-3 rounded-md bg-yellow-100 dark:bg-yellow-900/40
                                            text-yellow-800 dark:text-yellow-300 text-sm font-semibold`,children:["âš ï¸ Please switch to ",e.jsx("strong",{children:"Besu Eduâ€‘Net"})," to continue."]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-md bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 transition-transform duration-300 hover:scale-[1.02] animate-fadeIn",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Balance"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-slate-900 dark:text-slate-100",children:s.preState.balance})]}),e.jsxs("div",{className:"p-3 rounded-md bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 transition-transform duration-300 hover:scale-[1.02] animate-fadeIn",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Nonce"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-slate-900 dark:text-slate-100",children:s.preState.nonce})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-slate-600 dark:text-slate-400 break-all",children:["Wallet address: ",e.jsx("span",{className:"font-mono",children:s.wallet.address}),e.jsx("br",{}),"Network: ",e.jsx("strong",{children:s.wallet.network})]})]})]}),e.jsxs("div",{className:"rounded-xl border border-white/80 dark:border-slate-700 p-5 bg-white/80 dark:bg-slate-900/50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"2ï¸âƒ£ Explore Transaction Structure"}),e.jsxs("div",{className:"mb-6 rounded-xl border border-indigo-300 dark:border-indigo-700 bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/40 dark:to-indigo-800/30 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-indigo-700 dark:text-indigo-300",children:"Example Transaction"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold bg-indigo-600 text-white",children:"Value Transfer"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"font-semibold",children:"From"}),e.jsx("div",{className:"mt-1 font-mono text-xs break-all bg-white/70 dark:bg-slate-900/50 rounded-md px-2 py-1",children:"0x7e81C3B018e6c471eeFf5dEE7483bc32bF8635C4"})]}),e.jsx("div",{className:"flex justify-center text-indigo-600 dark:text-indigo-300 text-lg animate-bounce",children:"â†“"}),e.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"font-semibold",children:"To"}),e.jsx("div",{className:"mt-1 font-mono text-xs break-all bg-white/70 dark:bg-slate-900/50 rounded-md px-2 py-1",children:"0x0E66db7d115B8F392eB7DFb8BaCb23675dAEB59E"})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-indigo-900 dark:text-indigo-200",children:"Amount Sent"}),e.jsxs("div",{className:"px-3 py-1 rounded-lg bg-indigo-600 text-white font-mono font-bold",children:["1 ETH ",e.jsx("span",{className:"opacity-80",children:"(EDUâ€‘D)"})]})]})]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:["This example transaction transfers ",e.jsx("strong",{children:"1 EDUâ€‘D"})," (displayed as ETH in the block explorer) from one address to another. It represents a simple value transfer with no smart contract execution."]}),e.jsx("p",{className:"text-xs text-slate-500 italic",children:"Note: The explorer displays ETH, but the asset is EDU-D on Besu Edu-Net."}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"A transaction is a signed message containing specific fields."}),e.jsx("button",{onClick:()=>i(t=>({...t,txExplored:!0,lastAction:"Real transaction structure examined",discoveredData:[...t.discoveredData,"Transactions are signed data structures with specific fields that define value transfer, execution cost, and ordering."]})),className:"px-4 py-2 rounded-md bg-indigo-600 hover:bg-indigo-700 text-white font-semibold",children:"Inspect real transaction"}),s.txExplored&&e.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 dark:border-slate-700 p-4 bg-slate-50 dark:bg-slate-900/40 space-y-3",children:[e.jsx("p",{className:"text-sm font-semibold",children:"ğŸ” Real Transaction Example"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",a.status]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Block:"})," ",a.block]}),e.jsxs("div",{children:[e.jsx("strong",{children:"From:"})," ",e.jsx("span",{className:"font-mono break-all",children:a.from})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"To:"})," ",e.jsx("span",{className:"font-mono break-all",children:a.to})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Value:"})," ",a.value]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Nonce:"})," ",a.nonce]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Gas Limit:"})," ",a.gasLimit]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Gas Used:"})," ",a.gasUsed]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Gas Price:"})," ",a.gasPrice]})]}),e.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400 mt-4",children:["Transaction hash:",e.jsx("div",{className:"font-mono break-all mt-1",children:u})]}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-slate-700 dark:text-slate-300 space-y-1",children:[e.jsxs("li",{children:[e.jsx("span",{className:"inline-block px-2 py-0.5 mr-1 rounded bg-indigo-200 dark:bg-indigo-800 text-indigo-900 dark:text-indigo-200 text-xs font-bold align-middle",children:"from"}),": sender address (who paid gas and initiated state change)"]}),e.jsxs("li",{children:[e.jsx("span",{className:"inline-block px-2 py-0.5 mr-1 rounded bg-indigo-200 dark:bg-indigo-800 text-indigo-900 dark:text-indigo-200 text-xs font-bold align-middle",children:"to"}),": receiver address or contract"]}),e.jsxs("li",{children:[e.jsx("span",{className:"inline-block px-2 py-0.5 mr-1 rounded bg-indigo-200 dark:bg-indigo-800 text-indigo-900 dark:text-indigo-200 text-xs font-bold align-middle",children:"value"}),": ETH transferred"]}),e.jsxs("li",{children:[e.jsx("span",{className:"inline-block px-2 py-0.5 mr-1 rounded bg-indigo-200 dark:bg-indigo-800 text-indigo-900 dark:text-indigo-200 text-xs font-bold align-middle",children:"nonce"}),": senderâ€™s transaction counter"]}),e.jsxs("li",{children:[e.jsx("span",{className:"inline-block px-2 py-0.5 mr-1 rounded bg-indigo-200 dark:bg-indigo-800 text-indigo-900 dark:text-indigo-200 text-xs font-bold align-middle",children:"gasLimit"}),": maximum computation allowed"]}),e.jsxs("li",{children:[e.jsx("span",{className:"inline-block px-2 py-0.5 mr-1 rounded bg-indigo-200 dark:bg-indigo-800 text-indigo-900 dark:text-indigo-200 text-xs font-bold align-middle",children:"gasUsed"}),": computation actually consumed"]}),e.jsxs("li",{children:[e.jsx("span",{className:"inline-block px-2 py-0.5 mr-1 rounded bg-indigo-200 dark:bg-indigo-800 text-indigo-900 dark:text-indigo-200 text-xs font-bold align-middle",children:"gasPrice"}),": price per gas unit"]}),e.jsxs("li",{children:[e.jsx("span",{className:"inline-block px-2 py-0.5 mr-1 rounded bg-indigo-200 dark:bg-indigo-800 text-indigo-900 dark:text-indigo-200 text-xs font-bold align-middle",children:"status"}),": success or revert"]})]}),e.jsx("div",{className:"mt-2 text-xs text-indigo-600 dark:text-indigo-400",children:"ğŸ‘€ Find each of these fields in the block explorer and confirm they match the values above."}),e.jsxs("div",{className:"mt-2 text-xs text-indigo-700 dark:text-indigo-300",children:[e.jsx("span",{className:"font-semibold",children:"Tip:"})," Each ",e.jsx("span",{className:"inline-block px-2 py-0.5 rounded bg-indigo-200 dark:bg-indigo-800 text-indigo-900 dark:text-indigo-200 text-xs font-bold align-middle",children:"field"})," is crucialâ€”hover or click in block explorers to see real values."]}),e.jsx("div",{className:"p-3 rounded-md bg-indigo-50 dark:bg-indigo-900/30 text-sm text-indigo-800 dark:text-indigo-300",children:"Every field you see above is part of the signed transaction payload. Changing any field would invalidate the signature."}),e.jsx("div",{className:"p-3 rounded-md bg-yellow-100 dark:bg-yellow-900/40 text-sm text-yellow-800 dark:text-yellow-300",children:"ğŸ” Open the explorer and manually verify that each value above matches the onâ€‘chain transaction."}),e.jsx("a",{href:E,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm font-semibold text-indigo-600 dark:text-indigo-400 hover:underline",children:"ğŸ”— View this transaction in the Block Explorer"})]})]}),e.jsxs("div",{className:"rounded-xl border border-white/80 dark:border-slate-700 p-5 bg-white/80 dark:bg-slate-900/50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"3ï¸âƒ£ Understand Gas & Execution"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Gas limits computation and prevents abuse of the network."}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"From the transaction in the previous step we can see that:"}),e.jsxs("div",{className:"mb-4 p-3 rounded-md bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 text-xs text-slate-700 dark:text-indigo-200",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Gas & Execution in Real Transaction:"}),e.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Gas Limit:"})," ",a.gasLimit]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Gas Used:"})," ",a.gasUsed]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Gas Price:"})," ",a.gasPrice]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Status:"})," ",a.status]})]})]}),e.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-slate-100 dark:bg-slate-800 border border-slate-300 dark:border-slate-600 transition-all duration-300 hover:scale-[1.01] animate-fadeIn",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"ğŸ“ Gas Units â€” Wei, Gwei & ETH"}),e.jsxs("ul",{className:"text-sm space-y-1 text-slate-700 dark:text-slate-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"1 ETH"})," = 1,000,000,000 Gwei"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"1 Gwei"})," = 0.000000001 ETH"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Gas price"})," is always expressed in Gwei"]})]}),e.jsx("div",{className:`mt-3 p-3 rounded-md bg-indigo-50 dark:bg-indigo-900/30
                                                font-mono font-bold text-base text-indigo-900 dark:text-indigo-200`,children:"21,000 Ã— 1 Gwei = 21,000 Ã— 0.000000001 ETH = 0.000021 ETH"}),e.jsxs("p",{className:"mt-2 text-xs text-slate-600 dark:text-slate-400",children:["This is the ",e.jsx("strong",{children:"exact fee"})," paid by the sender for the transaction shown above."]})]}),e.jsx("button",{onClick:()=>i(t=>({...t,gasConceptUnderstood:!0,lastAction:"Gas concept confirmed",discoveredData:[...t.discoveredData,"Gas is required to pay for computation; gas limit sets the maximum allowed work, and gas price determines the fee paid to miners. If gas runs out, the transaction fails but fees are still spent."]})),className:"px-4 py-2 rounded-md bg-indigo-600 hover:bg-indigo-700 text-white font-semibold",children:"Confirm gas understanding"}),s.gasConceptUnderstood&&e.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 dark:border-slate-700 p-4 bg-slate-50 dark:bg-slate-900/40",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"âœ… Gas Explained (with real values)"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-slate-700 dark:text-slate-300 space-y-1",children:[e.jsxs("li",{children:["Gas limit was ",e.jsx("strong",{children:a.gasLimit})," â€” exactly enough for a simple ETH transfer."]}),e.jsxs("li",{children:["Gas used was ",e.jsx("strong",{children:a.gasUsed}),", meaning all allowed computation was consumed."]}),e.jsxs("li",{children:["Gas price was ",e.jsx("strong",{children:a.gasPrice}),", determining the transaction fee."]}),e.jsxs("li",{children:["Transaction status: ",e.jsx("strong",{children:a.status}),"."]})]}),e.jsx("div",{className:"mt-3 text-lg font-bold text-indigo-900 dark:text-indigo-200",children:"The fee paid = gasUsed Ã— gasPrice"}),e.jsx("div",{className:"mt-1 text-xl font-mono font-bold",children:"21,000 Ã— 1 Gwei = 0.000021 ETH"})]})]}),e.jsxs("div",{className:"rounded-xl border border-white/80 dark:border-slate-700 p-5 bg-white/80 dark:bg-slate-900/50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"4ï¸âƒ£ Observe Post-Transaction State"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"After execution of a sending transaction, balances and nonces change permanently."}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:["This post-transaction state refers to a transaction where the account ",e.jsx("strong",{children:"SENDS 1 EDU-D"}),". It does ",e.jsx("strong",{children:"not"})," refer to the faucet transaction where funds are received."]}),e.jsxs("div",{className:"mb-4 p-3 rounded-md bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 text-sm font-semibold",children:["âš ï¸ Important: Step 4 analyzes a ",e.jsx("strong",{children:"sending"})," transaction (like the one in Step 2). It does ",e.jsx("strong",{children:"not"})," describe the faucet transaction in Step 5."]}),e.jsxs("div",{className:"mb-6 rounded-xl border border-indigo-300 dark:border-indigo-700 bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/40 dark:to-indigo-800/30 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-indigo-700 dark:text-indigo-300",children:"Sending Transaction (Illustrative)"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold bg-indigo-600 text-white",children:"Stateâ€‘Changing"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"font-semibold",children:"From"}),e.jsx("div",{className:"mt-1 font-mono text-xs break-all bg-white/70 dark:bg-slate-900/50 rounded-md px-2 py-1",children:"Your address (sender)"})]}),e.jsx("div",{className:"flex justify-center text-indigo-600 dark:text-indigo-300 text-lg",children:"â†“"}),e.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"font-semibold",children:"To"}),e.jsx("div",{className:"mt-1 font-mono text-xs break-all bg-white/70 dark:bg-slate-900/50 rounded-md px-2 py-1",children:"Another address (receiver)"})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-indigo-900 dark:text-indigo-200",children:"Amount Sent"}),e.jsxs("div",{className:"px-3 py-1 rounded-lg bg-indigo-600 text-white font-mono font-bold",children:["1 ETH ",e.jsx("span",{className:"opacity-80",children:"(EDUâ€‘D)"})]})]})]}),e.jsx("button",{onClick:()=>i(t=>({...t,postStateObserved:!0,explanationUnlocked:!0,lastAction:"Post-transaction state observed",discoveredData:[...t.discoveredData,"When an account sends a transaction, its balance decreases (value + fee) and its nonce increases by 1. This demonstrates a permanent on-chain state change."]})),className:"px-4 py-2 rounded-md bg-indigo-600 hover:bg-indigo-700 text-white font-semibold",children:"Mark post-state observed"}),s.postStateObserved&&(()=>{const n=8.999979.toFixed(6);return e.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 dark:border-slate-700 p-4 bg-slate-50 dark:bg-slate-900/40",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"âœ… Observed Post-Transaction State (Illustrative Example)"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-md bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Pre-State (Before Sending Tx)"}),e.jsxs("div",{className:"mt-1 font-mono text-sm text-slate-900 dark:text-slate-100",children:["Balance: ",10," ETH",e.jsx("br",{}),"Nonce: ",20]})]}),e.jsxs("div",{className:"p-3 rounded-md bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Post-State (After Sending Tx)"}),e.jsxs("div",{className:"mt-1 font-mono text-sm text-slate-900 dark:text-slate-100",children:["Balance: ",n," ETH",e.jsx("br",{}),"Nonce: ",21]})]})]}),e.jsxs("div",{className:"mt-4 p-5 rounded-xl bg-indigo-100 dark:bg-indigo-900/40 border border-indigo-300 dark:border-indigo-700 space-y-3 transition-all duration-300 hover:scale-[1.01] animate-fadeIn",children:[e.jsx("p",{className:"text-lg font-bold text-indigo-900 dark:text-indigo-200",children:"State Transition (Sending 1 EDUâ€‘D)"}),e.jsxs("ul",{className:"list-disc list-inside text-base font-semibold text-indigo-900 dark:text-indigo-200",children:[e.jsxs("li",{children:["Balance decreases by ",e.jsx("strong",{children:"value + gas fee"})]}),e.jsxs("li",{children:["Nonce increases by ",e.jsx("strong",{children:"1"})]})]}),e.jsxs("div",{className:"mt-3 space-y-1 text-lg font-mono font-bold",children:[e.jsxs("div",{children:["postBalance = 10 âˆ’ 1 âˆ’ 0.000021 = ",e.jsx("span",{className:"text-indigo-700 dark:text-indigo-300",children:"8.999979 ETH"})]}),e.jsxs("div",{children:["postNonce = 20 + 1 = ",e.jsx("span",{className:"text-indigo-700 dark:text-indigo-300",children:"21"})]})]}),e.jsxs("p",{className:"mt-3 text-sm text-indigo-800 dark:text-indigo-300",children:["ğŸ“˜ This is an ",e.jsx("strong",{children:"illustrative example"}),". Your real wallet state is verified in Step 5."]})]})]})})()]}),e.jsxs("div",{className:"rounded-xl border border-white/80 dark:border-slate-700 p-5 bg-white/80 dark:bg-slate-900/50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"5ï¸âƒ£ Send a Real Transaction (Faucet)"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"To prove that you fully understand transactions, you will now perform a real onâ€‘chain action. You will request funds from the faucet and then verify that your onâ€‘chain state has changed."}),e.jsx("div",{className:`p-3 rounded-md bg-yellow-100 dark:bg-yellow-900/40
                        text-yellow-800 dark:text-yellow-300 text-sm mb-4`,children:"ğŸ’¡ Use the faucet to send ETH to your wallet. This creates a real blockchain transaction that consumes gas. Your nonce will NOT increase because your account is RECEIVING funds."}),e.jsxs("div",{className:`mt-3 p-3 rounded-md bg-blue-100 dark:bg-blue-900/40
  text-blue-800 dark:text-blue-300 text-sm`,children:["â„¹ï¸ ",e.jsx("strong",{children:"Important:"})," Receiving funds does ",e.jsx("strong",{children:"not"})," increase your nonce. The nonce only increases when ",e.jsx("strong",{children:"your account sends"})," a transaction."]}),e.jsx("a",{href:"https://faucet.dimikog.org/",target:"_blank",rel:"noopener noreferrer",className:"inline-block px-4 py-2 rounded-md bg-indigo-600 hover:bg-indigo-700 text-white font-semibold",children:"ğŸ’§ Open Faucet (New Tab)"}),e.jsxs("div",{className:"mt-4 text-sm text-slate-600 dark:text-slate-400",children:["After the faucet transaction is confirmed:",e.jsx("ul",{className:"list-disc list-inside mt-2 space-y-1",children:e.jsxs("li",{children:["Your ",e.jsx("strong",{children:"balance"})," should increase"]})})]}),e.jsx("button",{onClick:k,className:"mt-4 px-4 py-2 rounded-md bg-green-600 hover:bg-green-700 text-white font-semibold",children:"ğŸ”„ Re-check Balance & Nonce After Transaction"}),s.postTxChecked&&e.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 dark:border-slate-700 p-4 bg-slate-50 dark:bg-slate-900/40 animate-fadeIn",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"âœ… Real Transaction Confirmed"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:e.jsxs("div",{className:"p-3 rounded-md bg-white dark:bg-slate-800 border",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Balance (After)"}),e.jsx("div",{className:"font-mono text-sm",children:s.postState.balance})]})})]})]})]})]}),e.jsxs("section",{className:"rounded-xl border border-white/80 dark:border-slate-700 p-5 bg-slate-50 dark:bg-slate-900/40",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"ğŸ§  Mini Recap â€” Sender vs Receiver"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Use this table to consolidate what you observed in the previous steps. The rules below always apply in Ethereumâ€‘based blockchains."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 animate-fadeIn",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"ğŸ“¤ When an account SENDS a transaction"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsxs("li",{children:["Balance ",e.jsx("strong",{children:"decreases"})," (value + gas fee)"]}),e.jsxs("li",{children:["Nonce ",e.jsx("strong",{children:"increases by 1"})]}),e.jsx("li",{children:"Gas is paid by the sender"}),e.jsx("li",{children:"State change is initiated by this account"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 animate-fadeIn",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"ğŸ“¥ When an account RECEIVES a transaction"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsxs("li",{children:["Balance ",e.jsx("strong",{children:"increases"})]}),e.jsxs("li",{children:["Nonce ",e.jsx("strong",{children:"does NOT change"})]}),e.jsx("li",{children:"No gas is paid by the receiver"}),e.jsx("li",{children:"No state change is initiated by this account"})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 rounded-md bg-indigo-50 dark:bg-indigo-900/30 text-sm text-indigo-800 dark:text-indigo-300",children:["ğŸ’¡ ",e.jsx("strong",{children:"Key takeaway:"})," Only the ",e.jsx("strong",{children:"sender"})," of a transaction pays gas and increments their nonce. Receiving funds never changes the nonce."]}),e.jsxs("div",{className:"mt-6 p-4 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"ğŸ§ª Quick Check"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:["When you ",e.jsx("strong",{children:"receive funds"})," from the faucet, will your ",e.jsx("strong",{children:"nonce"})," increase?"]}),e.jsxs("select",{className:`w-full max-w-xs px-3 py-2 rounded-md border border-slate-300 dark:border-slate-600
                                   bg-white dark:bg-slate-900 text-sm`,onChange:t=>{const r=t.target.value==="no";alert(r?"âœ… Correct! Receiving funds does NOT change the nonce.":"âŒ Not quite. The nonce only increases when YOU send a transaction.")},defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Select an answerâ€¦"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]})]}),e.jsxs("section",{className:"rounded-xl border border-white/80 dark:border-slate-700 p-5 bg-white/70 dark:bg-slate-900/60",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"ğŸ” Discovered Data"}),s.discoveredData.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No discoveries yet â€” complete the steps above to unlock key blockchain insights."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:"These are the key rules and observations you have uncovered during this lab."}),e.jsx("ul",{className:"list-disc list-inside text-sm space-y-1 animate-fadeIn",children:s.discoveredData.map((t,r)=>e.jsx("li",{children:t},r))})]})]}),s.explanationUnlocked&&e.jsxs("section",{className:"rounded-xl border border-white/80 dark:border-indigo-700 p-6 bg-indigo-50 dark:bg-indigo-900/30 animate-fadeIn",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"ğŸ§  Explanation"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-700 dark:text-slate-300",children:[e.jsxs("li",{children:["Transactions are the ",e.jsx("strong",{children:"only mechanism"})," that can change blockchain state."]}),e.jsxs("li",{children:["The ",e.jsx("strong",{children:"sender"})," pays gas and increments their nonce."]}),e.jsxs("li",{children:["The ",e.jsx("strong",{children:"receiver"})," never pays gas and never changes nonce."]}),e.jsxs("li",{children:["Balance changes depend on ",e.jsx("strong",{children:"direction"})," (sending vs receiving)."]}),e.jsxs("li",{children:["All state changes become permanent only after ",e.jsx("strong",{children:"block inclusion"}),"."]})]})]}),s.postTxChecked&&e.jsxs("section",{className:"rounded-xl border border-white/80 dark:border-green-700 bg-green-50 dark:bg-green-900/30 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2 text-green-800 dark:text-green-200",children:"ğŸ‰ Lab Completed"}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-200 mb-4",children:["You have completed ",e.jsx("strong",{children:"Lab 04 â€” Transactions & Gas"}),". Return to the lab overview to mark this lab as completed and claim your rewards."]}),e.jsx("a",{href:"/#/labs/lab04",className:"inline-block px-4 py-2 rounded-md bg-green-600 text-white hover:bg-green-700",children:"â¬… Return to Lab Overview & Claim Rewards"})]}),e.jsxs("section",{className:"flex items-center justify-between pt-6 border-t border-white/80 dark:border-slate-700",children:[e.jsx("button",{onClick:f,disabled:!x,className:`text-sm ${x?"text-slate-700 dark:text-slate-200 hover:underline":"text-slate-400 cursor-not-allowed"}`,children:"ğŸ” Reset Lab"}),e.jsx("a",{href:"https://github.com/DimiKog/web3edu-labs/tree/main/lab-04-transactions-gas",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-slate-600 dark:text-slate-300 hover:underline",children:"ğŸ“š View Details (GitHub)"})]})]})})};export{A as default};
